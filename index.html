<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=620" />

    <title>Contextual Clock</title>

    <link rel="stylesheet" type="text/css" href="css/main.css" />

    <script src='js/jquery-1.6.2.min.js'></script>
    <script src='js/jquery.contextualDate.js'></script>
    <script src='js/jquery.contextualTime.js'></script>
    <script src='js/jquery.contextualClock.js'></script>
    <script src='js/SunriseSunset.js'></script>
    <script>
(function($) {
    var geo;

    /** @brief  When our location has been successfully established.
     *  @param  position    Our location.
     */
    function geoSuccess(position)
    {
        var clock   = $('#canvas').data('contextualClock');

        clock.setCoords(position.coords.longitude,
                        position.coords.latitude);

        $('#status').addClass('success')
                    .html( clock.geoStr() );
    }

    /** @brief  When our location has been successfully established.
     *  @param  position    Our location.
     */
    function geoError(msg)
    {
        $('#status').addClass('error')
                    .html( ($.type(msg) === 'string' ? msg : 'failed') );
    }

    $(document).ready(function() {
        if (navigator.geolocation)
        {
            navigator.geolocation.getCurrentPosition(geoSuccess, geoError);
        }
        else
        {
            geoError('not supported');
        }

        //$('#canvas').contextualClock({interval:10, test:true});
        $('#canvas').contextualClock({interval:500});
    });
}(jQuery));

    </script>
  </head>
  <body>
   <section id="wrapper">
    <header><h1>Contextual Clock</h1></header>
    <meta name="viewport" content="width=620" />

    <article>
      <p>Finding your location: <span id="status">checking...</span></p>
      <canvas id='canvas'></canvas>
      <div id="info">
       <div class="Date"></div>
       <div class="Time"></div>
      </div>
    </article>
   </section>
  </body>
</html>
